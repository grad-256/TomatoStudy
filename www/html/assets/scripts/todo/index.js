(self.webpackChunkstudyapp=self.webpackChunkstudyapp||[]).push([[500],{244:function(){"use strict";var e,t=null===(e=document.querySelector("#app"))||void 0===e?void 0:e.dataset.token,n=document.querySelector('[name="title"]'),a=document.querySelector("ul");n.focus(),a.addEventListener("click",(function(e){if("checkbox"===e.target.type&&fetch("?action=toggle",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id:e.target.parentNode.dataset.id,ticket:t})}).then((function(e){if(!e.ok)throw new Error("This todo has been deleted!");return e.json()})).then((function(t){t.is_done!==e.target.checked&&(alert("This Todo has been updated. UI is being updated."),e.target.checked=t.is_done)})).catch((function(e){alert(e.message),location.reload()})),e.target.classList.contains("delete")){if(!confirm("Are you sure?"))return;fetch("?action=delete",{method:"POST",body:new URLSearchParams({id:e.target.parentNode.dataset.id,ticket:t})}),e.target.parentNode.remove()}})),document.querySelector("form").addEventListener("submit",(function(e){e.preventDefault();var o=n.value;fetch("?action=add",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({title:o,ticket:t})}).then((function(e){return e.json()})).then((function(e){!function(e,t){var n=document.createElement("li");n.dataset.id=e;var o=document.createElement("input");o.type="checkbox";var c=document.createElement("span");c.textContent=t;var r=document.createElement("span");r.textContent="delete",r.classList.add("delete"),n.classList.add("c-task_text"),n.appendChild(o),n.appendChild(c),n.appendChild(r),a.insertBefore(n,a.firstChild)}(e.id,o)})),n.value="",n.focus()})),document.querySelector(".purge").addEventListener("click",(function(){confirm("Are you sure?")&&(fetch("?action=purge",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({ticket:t})}),document.querySelectorAll("li").forEach((function(e){e.children[0].checked&&e.remove()})))}))}},function(e){"use strict";e(e.s=244)}]);